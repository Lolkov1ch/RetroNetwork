{% for post in posts %}
    <a href="{% url 'posts:post_detail' post.pk %}" style="text-decoration: none; color: inherit;">
        <div class="post">
            {% if post.thumbnail_url %}
                <div class="post-thumbnail-container">
                    <img src="/media/{{ post.thumbnail_url }}" alt="{{ post.title }}" style="width: 100%; height: 100%; object-fit: cover;">
                    <div class="post-thumbnail-overlay"></div>
                </div>
            {% elif post.images or post.videos %}
                <div class="post-thumbnail-container">
                    {% if post.images %}
                        <img src="{{ post.images.0.file.url }}" alt="{{ post.title }}" style="width: 100%; height: 100%; object-fit: cover;">
                    {% elif post.videos %}
                        <video style="width: 100%; height: 100%; object-fit: cover;">
                            <source src="{{ post.videos.0.file.url }}" type="video/mp4">
                        </video>
                    {% endif %}
                    <div class="post-thumbnail-overlay"></div>
                </div>
            {% endif %}
            <div class="post-info">
                <h2>{{ post.title|truncatewords:5 }}</h2>
                <p class="post-description">{{ post.description|truncatewords:10 }}</p>
                <div class="post-meta">
                    <p>By <a href="{% url 'users:user_detail' post.author.handle %}">@{{ post.author.handle }}</a></p>
                    <p>{{ post.created_at|date:"d.m.Y H:i" }}</p>
                </div>
                <div class="post-actions">
                    <form method="post" action="{% url 'reactions:post_like' post.pk %}" onclick="event.stopPropagation();">
                        {% csrf_token %}
                        <button type="submit">‚ù§Ô∏è {{ post.likes.count }}</button>
                    </form>
                    {% if user.is_authenticated and user == post.author %}
                        <button type="button" onclick="event.stopPropagation(); window.location.href='{% url 'posts:post_update' post.pk %}';">‚úèÔ∏è Edit</button>
                        <button type="button" onclick="event.stopPropagation(); window.location.href='{% url 'posts:post_delete' post.pk %}';">üóëÔ∏è Delete</button>
                    {% endif %}
                </div>
            </div>
        </div>
    </a>
{% endfor %}
